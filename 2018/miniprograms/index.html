<!DOCTYPE html>
<html lang="en">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  
  
  
  
  
  <link rel="prev" href="/2018/%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0this%E7%9A%84%E6%8C%87%E5%90%91/" />
  <link rel="next" href="/2018/mysql/" />
  <link rel="canonical" href="/2018/miniprograms/" />
  <link rel='shortcut icon' type='image/x-icon' href='/favicon.ico' />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           MiniPrograms | Magic
       
  </title>
  <meta name="title" content="MiniPrograms | Magic">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="MiniPrograms"/>
<meta name="twitter:description" content="小程序相关"/>

  <script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "MiniPrograms",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "\/2018\/miniprograms\/"
  },
  
  "genre": "posts",
  "keywords": "MiniPrograms",
  "wordcount":  1253 ,
  "url": "\/2018\/miniprograms\/",
  "datePublished": "2018-05-21T00:00:00\x2b00:00",
  "dateModified": "2018-05-21T00:00:00\x2b00:00",
  
  "publisher": {
    "@type": "Organization",
    "name": "Magic",
    "logo": {
      "@type": "ImageObject",
      "url": "\/logo.png",
      "width":  50 ,
      "height":  50 
    }
  },
  "author": {
    "@type": "Person",
    "name": "Magic"
  },
  "description": "小程序相关"
}
</script>
</head>

  



  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="/">Magic</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about" title="">About</a>
                
                <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-sun"></i></a>&nbsp;
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-sun"></i></a>&nbsp;<a href="/">Magic</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about" title="">About</a>
                
        </div>
    </div>
</nav>

    	 <main class="main">
          <div class="container">
      		
<article class="post-warp">
    <header class="post-header">
        <h1 class="post-title">MiniPrograms</h1>
        <div class="post-meta">
            Written by <a href="/"
                rel="author">Magic</a>
            with ♥
            <span class="post-time">
                on <time
                    datetime=2018-05-21>21 May 2018</time>
            </span>
            in
            <i class="iconfont icon-folder"></i>
            <span class="post-category">
                <a href="/categories/miniprograms/"> MiniPrograms </a>
                
            </span>
            <i class="iconfont icon-timer"></i>
            6 min
        </div>
    </header>
    <div class="post-content">
        

        
        
        

        
        

        
        
        

        
        
        

        

<h1 id="小程序相关">小程序相关</h1>

<h2 id="原生小程序">原生小程序</h2>

<h3 id="小程序支持分包加载">小程序支持分包加载</h3>

<ul>
<li><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages/preload.html" rel="nofollow noreferrer" target="_blank">分包预下载</a></li>
</ul>

<h3 id="小程序转换为百度小程序">小程序转换为百度小程序</h3>

<ul>
<li>可以使用百度搬家工具进行转换 <strong>（不持支使用框架转换）</strong> ,<code>wx2swan</code><a href="https://github.com/yican008/wx2swan" rel="nofollow noreferrer" target="_blank">swan小程序搬家工具</a> <strong>(Node &gt;= 8.0)</strong></li>
</ul>

<h3 id="去掉小程序组件button默认样式">去掉小程序组件button默认样式</h3>

<ul>
<li>小程序中<code>button</code>组建有默认的点击效果，有<code>border</code>的话，需要去掉边框线的话需要这样写。</li>
</ul>

<pre><code class="language-css">/* 去掉button默认边框线 */
button::after {
  border: 0;
}
</code></pre>

<p>设置成禁用的话<code>disable=&quot;{{disable}}&quot;</code>,<code>disable</code>为 <code>true</code> 的话，点击按钮的时候还是有默认点击效果，如果需求需要去掉默认点击效果，就需要设置成行内样式来生效。</p>

<pre><code class="language-html">&lt;!-- 行内样式 --&gt;
 &lt;button class=&quot;get-code&quot; size=&quot;mini&quot;  bindtap=&quot;getCode&quot; disabled=&quot;{{disabled}}&quot; style=&quot;color: #00a4ff; background-color: #fff;&quot;&gt;{{getCodeBtn}}&lt;/button&gt;
</code></pre>

<h3 id="小程序限制">小程序限制</h3>

<ul>
<li>小程序背景图片不支持相对路径的图片路径，需要设置为绝对路径。</li>
<li>小程序现在默认上传包大小为<code>2M</code>（以后有可能变化），可以把图片资源单独打包成一个项目工程，然后在小程序中去引用图片的绝对路径。</li>
<li>小程序不支持<code>table</code>组件和标签，如果需要的话可用<code>wxss(css)</code>来写表格，然是涉及到表格跨行跨列的话不太好处理，可以换一种展现格式。简单来说就是小程序不支持复杂的表格。</li>
<li>小程序现在支持跳转外部<code>url</code>，需要使用<code>web-view</code>组建来实现，需要在微信公众平台登录，然后在设置里面&ndash;&gt;开发设置来绑定业务域名，并且在业务域名的跟目下放微信检验文件，只有放过之后，在域名跟目下能访问到这个检验文件，在绑定业务域名的时候才能绑定成功。</li>
</ul>

<p><figure><img src="/ring.svg" data-sizes="auto" data-src="/images/totalimgs/捕获.PNG" alt="Alt text" class="lazyload"><figcaption class="image-caption">Alt text</figcaption></figure></p>

<ul>
<li>小程序使用 <code>wx.request(OBJECT)</code> 来发起请求时，需要在微信公众平台设置&ndash;&gt;开发设置里面设置服务器域名配置。</li>
</ul>

<p><figure><img src="/ring.svg" data-sizes="auto" data-src="/images/totalimgs/fuwuqi.png" alt="Alt text" class="lazyload"><figcaption class="image-caption">Alt text</figcaption></figure></p>

<ul>
<li>小程序不能操作BOM/DOM。</li>
<li>在 <code>{{}}</code> 模板语法里不持支复杂计算，具体看小程序文档。</li>
<li>小程序文字不能上下居中，尤其是在一个些小的按钮里边。</li>
<li>小程序 canvas 在真机中不支持base64，画不到canvas里面。</li>
<li>小程序获取用户授权之后再能通过 wx.getUserInfo 来获取用户信息，可以通过 button 来发起用户授权。</li>
</ul>

<pre><code class="language-html">&lt;button class=&quot;{{isLog ? '' : 'button2'}}&quot; open-type=&quot;getUserInfo&quot; size=&quot;default&quot; hover-class=&quot;other-button-hover&quot; bindgetuserinfo=&quot;login&quot; disabled=&quot;{{loginDisabled}}&quot;&gt;用户授权&lt;/button&gt;
</code></pre>

<h3 id="获取系统剪贴板的内容">获取系统剪贴板的内容</h3>

<p>通过 <code>wx.getClipboardData</code> 获取系统剪贴板的内容成功后会有一个默认的 <code>toast</code>提示，内容为*内容已复制*，可以通过在 <code>success</code>回调中重写<code>toast</code>来修改这个默认提示内容。</p>

<pre><code class="language-js">wx.setClipboardData({
  data: 'www.baidu.com',
  success(res) {
    wx.getClipboardData({
      success(res) {
        wx.showToast({
          title: '去浏览器中打开',
          icon: 'none',
          duration: 5000
        })
      }
    })
  }
})
</code></pre>

<h3 id="小程序的web-view组件">小程序的web-view组件</h3>

<ul>
<li><p>在小程序里需要跳转H5页面，需要增加web-view组件，通过 web-view 的 src 属性去跳转，可以在 web-view 页面里的 js 文件里动态的获取赋值。</p></li>

<li><p>这个web-view 的 src 链接地址需要在微信公众平台后台 的业务域配置，并且要先在 根域名中放入微信检验文件，可以放多个不同的检验文件。</p></li>

<li><p>在 web-view 组件中分享可以通过 options.webViewUrl 来获取 url 来连接。</p></li>
</ul>

<pre><code class="language-javascript">// 分享获取
/**
 * 在分享出去需要携带的 url 上带有多参数的时候需要通过 encodeURIComponent 去编码，否则小程序在分享出去再次获取url 时候会只保留 第一个参数。
*/
onShareAppMessage (options) {
  console.log(options.webViewUrl)
  let path = '/pages/web-view/web-view?url=' + encodeURIComponent(options.webViewUrl)
  return {
    title: '',
    path: path
  }
},
onLoad (options) {
  console.log('options.url', options.url)
  let path = decodeURIComponent(options.url)
  console.log('path', path)
  this.setData({
    path: path
  })
}
</code></pre>

<h3 id="在小程序中的方法">在小程序中的方法</h3>

<ul>
<li>小程序需要在页面内点击按钮分享的时候，使用button 组件来发起分享事件(onShareAppMessage)。</li>
</ul>

<pre><code class="language-html">&lt;button class=&quot;flexCol&quot; open-type=&quot;share&quot;&gt;
  &lt;div class=&quot;shareIcon weixinIcon&quot;&gt;&lt;/div&gt;
  &lt;span class=&quot;shareText&quot;&gt;分享给好友&lt;/span&gt;
&lt;/button&gt;
</code></pre>

<ul>
<li>小程序分享需要定义分享函数。</li>
</ul>

<pre><code class="language-javascript">onShareAppMessage (ops) {
  console.log('分享', ops)
  return {
    title: 'xxxxx',
    imageUrl: 'https://www.xxxxx.xx.png'
  }
}
</code></pre>

<ul>
<li><p>小程序需要通过 wx.login API 去换取 jsCode，通过jsCode 后台来获取openId(微信用户的唯一标识)。</p></li>

<li><p>小程序中canvas 或者 通过 wx.createAnimation（动画）需要的是 px 或 number，这个时候就需要通过 wx.getSystemInfoSync 来获取系统信息，来动态的去计算所需的值。</p></li>
</ul>

<pre><code class="language-javascript">let systemInfo = wx.getSystemInfoSync()
// 用 系统的宽度 除 设计稿的 宽度  就是 2.48344 现在这个值
let x = systemInfo.windowWidth / 2.48344
let z = systemInfo.windowWidth / 3.75
this.animation1.translate3d(-x, 0, z).step()
</code></pre>

<ul>
<li>在小程序跳转到另一个页面，需要再次返回回来的时候，并且在当前页面需要获取从另一给页面获取相应的数据等，可以在最外定义 pageObj， 在当前页面初次 onLoad 时候 把 this 赋值给 pageObj，在另一个页面完成方法并且通过 wx.navigateBack 返回时，在 success 方法里 可以调用 app.pageObj.onLoad() 掉用前一个页面的方法。</li>
</ul>

<pre><code class="language-javascript">const app = getApp();
// index.js
onLoad (options) {
  app.pageObj = this
}
// login.js
wx.navigateBack({
  delta: 1,
  success: function () {
    app.pageObj.onLoad();
  }
})
</code></pre>

<h3 id="小程序富文本解析-wxparse">小程序富文本解析 wxParse</h3>

<ul>
<li>.wxml 文件</li>
</ul>

<pre><code class="language-html">&lt;import src=&quot;../../utils/wxParse/wxParse.wxml&quot;/&gt;

&lt;view class=&quot;pbd-ct wxParse {{index == curDesc ? 'show' : 'hidden'}}&quot; wx:for=&quot;{{getGoodsDetailD.detailList}}&quot; wx:key=&quot;detailDesc&quot;&gt;
   &lt;block wx:if=&quot;{{index==0}}&quot;&gt;
    &lt;template is=&quot;wxParse&quot; data=&quot;{{wxParseData:article1.nodes}}&quot;/&gt;
   &lt;/block&gt;
    &lt;block wx:elif=&quot;{{index==1}}&quot;&gt;
    &lt;template is=&quot;wxParse&quot; data=&quot;{{wxParseData:article2.nodes}}&quot;/&gt;
   &lt;/block&gt;
    &lt;block wx:elif=&quot;{{index==2}}&quot;&gt;
    &lt;template is=&quot;wxParse&quot; data=&quot;{{wxParseData:article3.nodes}}&quot;/&gt;
   &lt;/block&gt;
   &lt;block wx:else&gt;
    &lt;template is=&quot;wxParse&quot; data=&quot;{{wxParseData:article4.nodes}}&quot;/&gt;
   &lt;/block&gt;
&lt;/view&gt;
</code></pre>

<ul>
<li>对应 js 文件</li>
</ul>

<pre><code class="language-js">var WxParse = require('../../utils/wxParse/wxParse.js') //引入富文本插件js部分

Page({
  onLoad () {
    // 获取描述信息
    getGoodsDetail () {
      wx.request({
        ...,
        success: function (data) {
          // 富文本插件一次只能编译一条数据，详情detailDesc有四条，故需要绑定4个的数据名
          WxParse.wxParse('article1', 'html', res.data.rspBody.detailList[0].detailDesc.replace(/&lt;o:p&gt;/g, &quot;&quot;).replace(/&lt;\/o:p&gt;/g, &quot;&quot;).replace(/x0dx0a/g, &quot;&quot;).replace(/x0a/g, &quot;&quot;).replace(/【/g, &quot;&quot;), that, 0);
          WxParse.wxParse('article2', 'html', res.data.rspBody.detailList[1].detailDesc.replace(/&lt;o:p&gt;/g, &quot;&quot;).replace(/&lt;\/o:p&gt;/g, &quot;&quot;).replace(/x0dx0a/g, &quot;&quot;).replace(/x0a/g, &quot;&quot;).replace(/【/g, &quot;&quot;).replace(/&lt;u1:p&gt;/g, &quot;&quot;), that, 0);
          WxParse.wxParse('article3', 'html', res.data.rspBody.detailList[2].detailDesc.replace(/&lt;o:p&gt;/g, &quot;&quot;).replace(/&lt;\/o:p&gt;/g, &quot;&quot;).replace(/x0dx0a/g, &quot;&quot;).replace(/x0a/g, &quot;&quot;).replace(/【/g, &quot;&quot;).replace(/&lt;u1:p&gt;/g, &quot;&quot;), that, 0);
          WxParse.wxParse('article4', 'html', res.data.rspBody.detailList[3].detailDesc.replace(/&lt;o:p&gt;/g, &quot;&quot;).replace(/&lt;\/o:p&gt;/g, &quot;&quot;).replace(/x0dx0a/g, &quot;&quot;).replace(/x0a/g, &quot;&quot;).replace(/【/g, &quot;&quot;).replace(/&lt;u1:p&gt;/g, &quot;&quot;), that, 0);
        }
      })
    }
  }
})
</code></pre>

<ul>
<li>对应的 .wxss 样式</li>
</ul>

<pre><code class="language-css">/*引入富文本插件wxss部分*/
@import &quot;../../utils/wxParse/wxParse.wxss&quot;;

/*富文本插件样式修改*/
.wxParse-img{
    width:100% !important;
}
/*富文本插件编译后，需设置wxParse-pre类才能对富文本原始标签pre样式起作用*/
.pbd-ct .wxParse-pre {
    white-space: pre-wrap;
    word-wrap: break-word;
}

/*富文本插件编译后，需设置wxParse-table类才能对富文本原始标签table样式起作用*/
.pbd-ct  .wxParse-table {
     width: 100% !important;
     border-collapse: collapse;
     border-spacing: 0;
}
.pbd-ct  .wxParse-tr {
    border-right:0;
    border-bottom:0;
    display: table-row;
    vertical-align: inherit;
    border-color: inherit;
}
.wxParse-th,.wxParse-td {
      border-left:0;
    vertical-align: inherit;
}
.wxParse-td {
    display: table-cell;
}
.wxParse-td:first-child{
    margin-left:20pt;
}
</code></pre>

<ul>
<li>具体文档可以看富文本解析 <a href="https://github.com/icindy/wxParse" rel="nofollow noreferrer" target="_blank">GitHub</a></li>
<li>适用于 Mpvue 的微信小程序富文本解析自定义组件 <a href="https://github.com/F-loat/mpvue-wxParse" rel="nofollow noreferrer" target="_blank">GitHub</a></li>
</ul>

<h3 id="小程序指定页面二维码">小程序指定页面二维码</h3>

<ul>
<li>可以看小程序文档获取二维码api文档。</li>
<li>或者 <em>使用 Vue CLI 3 来写的</em> <a href="https://github.com/magicLaLa/GetWxCode" rel="nofollow noreferrer" target="_blank">获取微信小程序指定页面二维码</a></li>
</ul>

<h2 id="mpvue小程序开发框架-美团">MPVUE小程序开发框架（美团）</h2>

<ul>
<li><p><a href="http://mpvue.com/mpvue/quickstart/#4-2018723" rel="nofollow noreferrer" target="_blank">MPVUE支持分包</a>，找不到问题可以到<a href="https://github.com/Meituan-Dianping/mpvue/issues" rel="nofollow noreferrer" target="_blank">Issues</a>中寻找。</p></li>

<li><p>获取微信小程序实例，可以通过</p></li>
</ul>

<pre><code class="language-javascript">this.$root.$mp || this.$mp // 来获取
</code></pre>

<ul>
<li>小程序中弹窗出来，不让页面进行滚动，可以在 遮罩 和 弹窗上增加 <code>catchtouchmove</code></li>
</ul>

<pre><code class="language-html">!-- 遮罩 --&gt;
&lt;div v-if=&quot;isShowModel&quot; class=&quot;model&quot; catchtouchmove=&quot;true&quot;&gt;&lt;/div&gt;
</code></pre>

<ul>
<li>有时候需要和 小程序的生命周期混用。</li>
<li>不支持在组件上绑定事件，例如：<code>@click</code>。如果要子组件中出发父组件事件，使用<code>vuex</code>来统一管理。</li>
<li>不支持使用<code>mapState mapGetters mapActions mapMutations</code> 辅助函数。可以在每个<code>.vue</code>模板中单独引用<code>import store from './store/stroe.js'</code>。然后通过使用 <code>store.commit(...)/store.dispatch(...)</code>来触发事件。</li>
<li>可以在<code>main.js</code>里面设置<code>vue.prototype.store = store</code>，就可以使用辅助函数了。</li>
</ul>

<pre><code class="language-javascript">// src =&gt; store =&gt; index.js
import Vue from 'vue'
import Vuex from 'vuex'

Vue.use(Vuex)

const store = new Vuex.Store({
  state: {
    isAn: 1, // 轮播切换
    isShowModel: false, // 是否展示遮罩
    isShareBox: false, // 是否展示分享弹窗
    systemInfo: '', // 系统信息
    pageObj: '', // 页面实例
    popupFunObj: { // 弹窗两个方法
      comfirm: '',
      cancel: ''
    },
    isLogin: false, // 是否登录
    localName: '' // 登录地点
  },
  mutations: {
    change: (state) =&gt; {
      console.log('mutations change')
      const obj = state
      obj.isAn++
    },
    decrement: (state) =&gt; {
      const obj = state
      obj.count -= 1
    }
  }
})

export default store

// src =&gt; main.js
import Vue from 'vue'
import App from './App'
import store from '@/store/index'

Vue.config.productionTip = false
App.mpType = 'app'

Vue.prototype.$store = store

const app = new Vue(App)
app.$mount()

// src =&gt; index =&gt; index.vue
import { mapState } from 'vuex'

export default {
  computed: {
    ...mapState(['isShowModel', 'isShareBox'])
  }
}
</code></pre>

<ul>
<li>因为小程序不支持在模板语法里<code>{{}}</code> 复杂的计算，所以在 mpvue 中也不能进行复杂的计算。</li>
<li>在原生小程序中访问下程序实例是通过<code>getApp()</code>来获取定义在<code>app.js中的函数和自定义的属性</code>，在<code>mpVue</code>中在<code>created/mounted/onLoad...</code>中调用<code>getApp()</code>获取不到在<code>app.js</code>中自定义的一些属性，在<code>mpVue</code>中推荐使用<code>VUEX</code>来集中管理公共的自定义的一些属性和方法。</li>
<li>最新版的 app.json 是单独放到 src 下面，不是在 main.js 里面去写自动生成页面路径添加到 pages 里面，每一个 page 也是单独把 main.json 放到单独的页面文件下。</li>
</ul>

<p><figure><img src="/ring.svg" data-sizes="auto" data-src="/images/totalimgs/APPjson.png" alt="Alt text" class="lazyload"><figcaption class="image-caption">Alt text</figcaption></figure>
<figure><img src="/ring.svg" data-sizes="auto" data-src="/images/totalimgs/pagejson.png" alt="Alt text" class="lazyload"><figcaption class="image-caption">Alt text</figcaption></figure></p>

<ul>
<li>可以写背景图片，把背景图片放到 <code>src =&gt; assets =&gt; images</code> 下。然后在 scss 中 通过 <code>background: url(~@/assets/images/top.png) no-repeat;</code>来使用，然后需要在 <code>build =&gt; webpack.base.conf.js</code> 修改 module。</li>
</ul>

<p><figure><img src="/ring.svg" data-sizes="auto" data-src="/images/totalimgs/imgimg.png" alt="Alt text" class="lazyload"><figcaption class="image-caption">Alt text</figcaption></figure></p>

<ul>
<li>也可以使用精灵图（雪碧图）来写， 具体代码如下:</li>
</ul>

<p>webpack.base.conf.js</p>

<pre><code class="language-javascript">// 自动雪碧图
const spritesmith = require('webpack-spritesmith')

// 雪碧图位置
const SPRITES = path.resolve(__dirname, '../src/sprites/')
const SPRITES_SUB = path.resolve(__dirname, '../src/sprites/*')

// 雪碧图方法
function generateSprites() {
  return glob.sync(SPRITES_SUB).map(filenames =&gt; {
    let pathName = filenames.substring(SPRITES.length + 1)

    return new spritesmith({
      src: {
        cwd: path.resolve(SPRITES, pathName),
        glob: '*.png'
      },
      target: {
        image: path.resolve(__dirname, '../src/sprite-generate/sprite-' + pathName + '.png'),
        css: [
          [
            path.resolve(__dirname, '../src/sprite-generate/_sprite-' + pathName + '.scss'),
            {
              format: 'handlebars_based_template'
            }
          ]
        ]
      },
      apiOptions: {
        cssImageRef: '~sprite-' + pathName + '.png'
      },
      customTemplates: {
        handlebars_based_template: path.resolve(__dirname, '../scss.template.handlebars')
      },
      spritesmithOptions: {
        padding: 6
      }
    })

  })
}

module.exports = {
  ...,
  resolve: {
    extensions: ['.js', '.vue', '.json'],
    modules: [
      resolve('src'),
      resolve('node_modules'),
      resolve('src/sprite-generate')
    ],
    alias: {
      'vue': 'mpvue',
      '@': resolve('src')
    },
    symlinks: false,
    aliasFields: ['mpvue', 'weapp', 'browser'],
    mainFields: ['browser', 'module', 'main']
  },
  plugins: [
    ............,
    ...generateSprites()
  ]
}
</code></pre>

<p>需要在 <code>src =&gt; sprite-generate | sprites</code> 新建这两个文件夹。</p>

<p><figure><img src="/ring.svg" data-sizes="auto" data-src="/images/totalimgs/generateSprites.png" alt="Alt text" class="lazyload"><figcaption class="image-caption">Alt text</figcaption></figure></p>

<h3 id="动画切换效果">动画切换效果</h3>

<ul>
<li>动画效果如下：</li>
</ul>

<p><figure><img src="/ring.svg" data-sizes="auto" data-src="/images/totalimgs/ic.gif" alt="图片" class="lazyload"><figcaption class="image-caption">图片</figcaption></figure></p>

<ul>
<li>模板.vue</li>
</ul>

<pre><code class="language-vue">&lt;template&gt;
  &lt;div class=&quot;head&quot;&gt;
    &lt;!-- 卡片切换 --&gt;
    &lt;div class=&quot;cardBox&quot;&gt;
      &lt;!-- 左按钮 --&gt;
      &lt;div class=&quot;iconBtn leftBtn&quot; data-isAct=&quot;btn&quot; @click=&quot;change&quot;&gt;&lt;/div&gt;
      &lt;!-- 右按钮 --&gt;
      &lt;div class=&quot;iconBtn rightBtn&quot; data-isAct=&quot;btn&quot; @click=&quot;change&quot;&gt;&lt;/div&gt;
      &lt;!-- 图片 --&gt;
      &lt;div class=&quot;picBox&quot;&gt;
        &lt;div @click=&quot;change&quot; :animation=&quot;isAn%2 !== 0 ? animationData : animationData2&quot; :data-isAct=&quot;isAn%2 !== 0 ? 'isActive' : 'btn'&quot; class=&quot;picIcon bigMac&quot; :class=&quot;isAn%2 !== 0 ? 'isActive' : ''&quot;&gt;&lt;/div&gt;
        &lt;div @click=&quot;change&quot; :animation=&quot;isAn%2 === 0 ? animationData : animationData2&quot; :data-isAct=&quot;isAn%2 === 0 ? 'isActive' : 'btn'&quot; class=&quot;picIcon youngIcon&quot; :class=&quot;isAn%2 === 0 ? 'isActive' : ''&quot;&gt;&lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import { mapState, mapMutations } from 'vuex'

export default {
  data () {
    return {
      animation1: '',
      animation2: '',
      animationData: {},
      animationData2: {}
    }
  },
  computed: {
    ...mapState(['isAn', 'systemInfo'])
  },
  methods: {
    ...mapMutations(['change'])
  },
  mounted () {
    console.log('systemInfo', this.systemInfo)
    let x = this.systemInfo.windowWidth / 2.48344
    let z = this.systemInfo.windowWidth / 3.75
    let options = {
      duration: 1000,
      timingFunction: 'ease'
    }
    this.animation1 = wx.createAnimation(options)
    this.animation2 = wx.createAnimation(options)
    this.animation1.translate3d(-x, 0, z).step()
    this.animation2.translate3d(0, 0, 0).step()
    this.animationData = this.animation1.export()
    this.animationData2 = this.animation2.export()
  }
}
&lt;/script&gt;

&lt;style lang=&quot;scss&quot; scoped&gt;
.cardBox {
  width: 100%;
  height: 224px;
  padding: 0 32px;
  box-sizing: border-box;
  position: absolute;
  bottom: 0;
  left: 0;

  .iconBtn {
    width: 30px;
    height: 60px;
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    z-index: 20;
  }

  .leftBtn {
    background: url(~@/assets/images/leftBtn.png) no-repeat;
    background-size: 100% 100%;
    left: 32px;
  }
  .rightBtn {
    background: url(~@/assets/images/rightBtn.png) no-repeat;
    background-size: 100% 100%;
    right: 32px;
  }

  .picBox {
    width: 100%;
    height: 100%;
    position: relative;
    z-index: 10;
    perspective: 1000px;

    .picIcon {
      width: 281px;
      height: 132px;
      position: absolute;
      top: 50%;
      margin-top: -67px;
      right: 20px;
    }

    .bigMac {
      background: url(~@/assets/images/bigMac.png) no-repeat;
      background-size: 100% 100%;
      z-index: 10;
    }
    .youngIcon {
      background: url(~@/assets/images/youngIcon.png) no-repeat;
      background-size: 100% 100%;
      z-index: 5;
    }

    .isActive {
      box-shadow: 0px 0px 21px 5px
        rgba(228, 229, 245, 0.8);
      border-radius: 16px;
      z-index: 15;
    }
  }
}
&lt;/style&gt;
</code></pre>

<pre><code class="language-js">// store =&gt; index.js
// https://vuex.vuejs.org/zh-cn/intro.html
// make sure to call Vue.use(Vuex) if using a module system
import Vue from 'vue'
import Vuex from 'vuex'

Vue.use(Vuex)

const store = new Vuex.Store({
  state: {
    isAn: 1, // 轮播切换
    isShowModel: false, // 是否展示遮罩
    systemInfo: '' // 系统信息
  },
  mutations: {
    change: (state, e) =&gt; {
      const obj = state
      if (!!e.mp.currentTarget.dataset.isact &amp;&amp; e.mp.currentTarget.dataset.isact !== 'isActive') {
        obj.isAn++
        if (obj.isAn % 2 !== 0) {
          obj.webViewUrl = 'https://www.google.com'
        } if (obj.isAn % 2 === 0) {
          obj.webViewUrl = 'https://www.baidu.com'
        }
      }
    }
  }
})

export default store
</code></pre>

<ul>
<li><strong>MPVUE</strong> 现在也支持 <a href="http://smartprogram.baidu.com/mappconsole/main/login" rel="nofollow noreferrer" target="_blank">百度小程序</a></li>
</ul>

<h2 id="okam小程序开发框架-百度">OKAM小程序开发框架（百度）</h2>

<ul>
<li><a href="https://ecomfe.github.io/okam/#/" rel="nofollow noreferrer" target="_blank">奥卡姆，一个面向小程序开发的开发框架，提供类_Vue_的开发体验</a></li>
</ul>

<h4 id="小程序支持">小程序支持</h4>

<ul>
<li>√ <a href="https://smartprogram.baidu.com/docs/introduction/enter_application/" rel="nofollow noreferrer" target="_blank">百度小程序</a></li>
<li>√ <a href="https://developers.weixin.qq.com/miniprogram/dev/" rel="nofollow noreferrer" target="_blank">微信小程序</a></li>
<li>√ <a href="https://docs.alipay.com/mini/developer/getting-started" rel="nofollow noreferrer" target="_blank">支付宝小程序</a></li>
<li>√ <a href="https://developer.toutiao.com/docs/" rel="nofollow noreferrer" target="_blank">头条小程序</a></li>
<li>√ <a href="https://www.quickapp.cn/" rel="nofollow noreferrer" target="_blank">快应用</a> <code>初步支持，待完善</code></li>
</ul>

<h2 id="megalo小程序开发框架-网易">Megalo小程序开发框架（网易）</h2>

<ul>
<li>Megalo 是基于 Vue（Vue@2.5.16） 的小程序开发框架，让开发者可以用 Vue 的开发方式开发小程序应用。Megalo 是为了跨 H5 和小程序两端的应用提供一个高效的解决方案，只需要少量改动即可完成 H5 和小程序之间的代码迁移。<br /></li>
<li>Megalo 目前支持微信小程序，支付宝小程序，百度智能小程序。<a href="https://megalojs.org/#/" rel="nofollow noreferrer" target="_blank">官网</a></li>
</ul>

<h2 id="taro小程序开发框架-京东">Taro小程序开发框架（京东）</h2>

<p>Taro 是一套遵循 React 语法规范的 多端开发 解决方案。现如今市面上端的形态多种多样，Web、React-Native、微信小程序等各种端大行其道，当业务要求同时在不同的端都要求有所表现的时候，针对不同的端去编写多套代码的成本显然非常高，这时候只编写一套代码就能够适配到多端的能力就显得极为需要。</p>

<p>使用 Taro，我们可以只书写一套代码，再通过 Taro 的编译工具，将源代码分别编译出可以在不同端（微信小程序、H5、RN 等）运行的代码。</p>

<ul>
<li><a href="https://nervjs.github.io/taro/docs/README.html" rel="nofollow noreferrer" target="_blank">官网</a></li>
</ul>

<h2 id="mpx-滴滴">MPX (滴滴)</h2>

<p>Mpx是一款致力于提高小程序开发体验的增强型小程序框架。</p>

<ul>
<li><a href="https://didi.github.io/mpx/" rel="nofollow noreferrer" target="_blank">官网</a></li>
</ul>

    </div>

    <div class="post-copyright">
        
        <p class="copyright-item">
            <span>Author:</span>
            <span>Magic </span>
        </p>
        

        <p class="copyright-item">
            <span>Words:</span>
            <span>1253</span>
        </p>

        <p class="copyright-item">
            
            <span>Share:</span>
            <span>

      
        <a href="//twitter.com/share?url=%2f2018%2fminiprograms%2f&amp;text=MiniPrograms&amp;via=" target="_blank" title="Share on Twitter">
          <i class="iconfont icon-twitter"></i>
        </a>
        
      
      
        <a href="//www.facebook.com/sharer/sharer.php?u=%2f2018%2fminiprograms%2f" target="_blank" title="Share on Facebook">
          <i class="iconfont icon-facebook"></i>
        </a>
        
      
      
      
      
      
      
        
      
        
      

          

          

          

          
        <a href="//service.weibo.com/share/share.php?url=%2f2018%2fminiprograms%2f&amp;appkey=&amp;title=MiniPrograms" target="_blank" title="Share on Douban ">
            <i class="iconfont icon-weibo"></i>
          </a>
          
</span>
        </p>
        

        
        <p class="copyright-item">
            Released under <a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a>
        </p>
        
    </div>


    <div class="post-tags">
        
        <section>
            <i class="iconfont icon-icon-tag"></i>Tag:
            
            <span class="tag"><a href="/tags/miniprograms/">
                    #MiniPrograms</a></span>
            
        </section>
        
        <section>
            <a href="javascript:window.history.back();">Back</a></span> ·
            <span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="/2018/%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0this%E7%9A%84%E6%8C%87%E5%90%91/" class="prev" rel="prev" title="箭头函数this的指向"><i
                class="iconfont icon-dajiantou"></i>&nbsp;箭头函数this的指向</a>
        
        
        <a href="/2018/mysql/" class="next" rel="next"
            title="MySQL 使用">MySQL 使用&nbsp;<i class="iconfont icon-xiaojiantou"></i></a>
        
    </div>

    <div class="post-comment">
        
        <div id="disqus_thread"></div>
    <script type="text/javascript">
    (function() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'yourdiscussshortname';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  


        
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2017 - 2019</span>
        
         
            <span class="author" itemprop="copyrightHolder"><a href="/">Magic</a> | </span>
         

		  <span>Crafted with ❤️ by <a href="https://github.com/Fastbyte01/KeepIt" target="_blank" rel="external nofollow noopener noreffer">KeepIt</a> & <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreffer">Hugo</a></span>
    </div>
</footer>












    
     <link href="//lib.baomitu.com/lightgallery/1.6.12/css/lightgallery.min.css" rel="stylesheet">  
      
     <script src="/js/vendor_gallery.min.js" async="" ></script>
    
  







     </div>
  </body>
</html>
