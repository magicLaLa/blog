(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{173:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/avwo/whistle",target:"_blank",rel:"noopener noreferrer"}},[t._v("whistle(读音"),n("code",[t._v("[ˈwɪsəl]")]),t._v("，拼音"),n("code",[t._v("[wēisǒu]")]),t._v(")是基于Node实现的跨平台抓包调试代理工具"),n("OutboundLink")],1),t._v("，有以下基本功能：")]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),n("h4",{attrs:{id:"注入调试-vconsole-或者-eruda"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#注入调试-vconsole-或者-eruda","aria-hidden":"true"}},[t._v("#")]),t._v(" 注入调试 "),n("a",{attrs:{href:"https://github.com/whistle-plugins/whistle.inspect",target:"_blank",rel:"noopener noreferrer"}},[t._v("vConsole 或者 Eruda"),n("OutboundLink")],1)]),t._v(" "),t._m(6),t._v(" "),n("ul",[n("li",[t._v("该规则需要安装插件："),n("code",[t._v("npm i -g whistle.inspect")]),t._v("，插件"),n("a",{attrs:{href:"https://github.com/whistle-plugins/whistle.inspect",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),n("OutboundLink")],1)]),t._v(" "),t._m(7)]),t._v(" "),n("h4",{attrs:{id:"注入-weinre"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#注入-weinre","aria-hidden":"true"}},[t._v("#")]),t._v(" 注入 "),n("a",{attrs:{href:"http://wproxy.org/whistle/webui/weinre.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("weinre"),n("OutboundLink")],1)]),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),n("ol",[n("li",[n("p",[t._v("全局安装插件："),n("code",[t._v("npm i -g whistle.vase")]),t._v("，插件"),n("a",{attrs:{href:"https://github.com/whistle-plugins/whistle.vase",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),n("OutboundLink")],1)])]),t._v(" "),t._m(13),t._v(" "),t._m(14)]),t._v(" "),t._m(15),t._m(16),t._v(" "),t._m(17),t._v(" "),n("p",[t._v("该规则需要安装插件")]),t._v(" "),n("p",[t._v("1.全局安装插件："),n("code",[t._v("npm i -g whistle.script")]),t._v("，插件"),n("a",{attrs:{href:"https://github.com/whistle-plugins/whistle.script",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("2.代理环境打开 http://script.local.whistlejs.com")]),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),n("h4",{attrs:{id:"更多关于whistle"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#更多关于whistle","aria-hidden":"true"}},[t._v("#")]),t._v(" 更多关于"),n("a",{attrs:{href:"http://wproxy.org/whistle/",target:"_blank",rel:"noopener noreferrer"}},[t._v("whistle"),n("OutboundLink")],1)])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"whistle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#whistle","aria-hidden":"true"}},[this._v("#")]),this._v(" whistle")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"很强大的一款基于-node-平台的调试工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#很强大的一款基于-node-平台的调试工具","aria-hidden":"true"}},[this._v("#")]),this._v(" 很强大的一款基于 node 平台的调试工具")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ol",[n("li",[t._v("查看HTTP、HTTPS请求响应内容")]),t._v(" "),n("li",[t._v("查看WebSocket、Socket收发的帧数据")]),t._v(" "),n("li",[t._v("设置请求hosts、上游http/socks代理")]),t._v(" "),n("li",[t._v("修改请求url、方法、头部、内容")]),t._v(" "),n("li",[t._v("修改响应状态码、头部、内容，并支持本地替换")]),t._v(" "),n("li",[t._v("修改WebSocket或Socket收发的帧数据")]),t._v(" "),n("li",[t._v("内置调试移动端页面的weinre和log")]),t._v(" "),n("li",[t._v("作为HTTP代理或反向代理")]),t._v(" "),n("li",[t._v("支持用Node编写插件扩展功能")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("具体功能如图:\n"),s("img",{attrs:{src:"/img/whistle.png",alt:"基本功能"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"线上资源文件指向本地"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#线上资源文件指向本地","aria-hidden":"true"}},[this._v("#")]),this._v(" 线上资源文件指向本地")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Rules: "),s("code",[this._v("app.10086.cn/xxxxxx file://D:\\xxxx\\file")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Rules: "),s("code",[this._v("xxxxx.html whistle.inspect://")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[this._v("如果需要注入 Eruda，只需改成 "),s("code",[this._v("whistle.inspect://e")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Rules: "),s("code",[this._v("app.10086.cn/xxxxxx.html weinre://id")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"打印日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打印日志","aria-hidden":"true"}},[this._v("#")]),this._v(" 打印日志")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("ules："),s("code",[this._v("app.10086.cn/xxxxxxxxx.html log://")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"使用-mock-修改响应"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-mock-修改响应","aria-hidden":"true"}},[this._v("#")]),this._v(" 使用 mock 修改响应")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Rules："),s("code",[this._v("app.10086.cn/xxxx/xxx/xxxx whistle.vase://systemDate")]),s("br"),this._v("\n该规则需要安装插件")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("p",[this._v("代理环境打开 "),s("code",[this._v("http://vase.local.whistlejs.com")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("p",[this._v("添加名为 "),s("code",[this._v("systemDate")]),this._v("，Engine为 "),s("code",[this._v("mock")]),this._v(" 的数据")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),n("span",{attrs:{class:"token property"}},[t._v('"retCode"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"000000"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),n("span",{attrs:{class:"token property"}},[t._v('"retDesc"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"SUCCESS"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),n("span",{attrs:{class:"token property"}},[t._v('"rspBody"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),n("span",{attrs:{class:"token property"}},[t._v('"date"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"2018-11-16 15:55:46"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     "),n("span",{attrs:{class:"token property"}},[t._v('"test"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"@cword(1,10)"')]),t._v("\n   "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"修改响应，解密数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改响应，解密数据","aria-hidden":"true"}},[this._v("#")]),this._v(" 修改响应，解密数据")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Rules："),s("code",[this._v("app.10086.cn/xxxxxx script://decryptByAES")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("3.添加名为 "),s("code",[this._v("decryptByAES")]),this._v(" 脚本")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("// 全局安装 npm i -g crypto-js")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" CryptoJS "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("require")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'crypto-js'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),n("span",{attrs:{class:"token function-variable function"}},[t._v("decryptByAES")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" key "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" CryptoJS"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("enc"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Utf8"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("parse")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'密钥'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" iv "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" CryptoJS"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("enc"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Utf8"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("parse")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'偏移量'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),n("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" out "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" CryptoJS"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token constant"}},[t._v("AES")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("decrypt")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   iv"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   mode"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" CryptoJS"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mode"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token constant"}},[t._v("CBC")]),t._v("\n "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" CryptoJS"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("enc"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Utf8"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("stringify")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("out"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nexports"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[t._v("handleRequest")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),n("span",{attrs:{class:"token comment"}},[t._v("// 发送请求")]),t._v("\n "),n("span",{attrs:{class:"token keyword"}},[t._v("yield")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("next")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n "),n("span",{attrs:{class:"token comment"}},[t._v("// 获取响应体")]),t._v("\n "),n("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" resBody "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("yield")]),t._v(" ctx"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("getResBody")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n "),n("span",{attrs:{class:"token comment"}},[t._v("// 转成 JSON")]),t._v("\n resBody "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token constant"}},[t._v("JSON")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("parse")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resBody"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n "),n("span",{attrs:{class:"token comment"}},[t._v("// 解密")]),t._v("\n ctx"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("decryptByAES")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resBody"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])}],!1,null,null,null);e.options.__file="whistle.md";s.default=e.exports}}]);