<!DOCTYPE html>
<html lang="en">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  
  
  
  
  
  <link rel="prev" href="/2017/vue-watch/" />
  <link rel="next" href="/2017/vueplugins/" />
  <link rel="canonical" href="/2017/workrelated/" />
  <link rel='shortcut icon' type='image/x-icon' href='/favicon.ico' />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           vue 相关问题 | Magic
       
  </title>
  <meta name="title" content="vue 相关问题 | Magic">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="vue 相关问题"/>
<meta name="twitter:description" content="使用 keep-alive 来包裹路由后，某个页面需要动态的去除缓存 可以使用动态的:include=&quot;calcInclude&quot; 来对需要的缓存的页面进行修改，calcInclude需要使用计算属性。整个include使用数组来储存string[]，数据可放到全局 store 中，通过 commit去修改，在需要的地方去更改。
&lt;keep-alive :include=&#34;calcInclude&#34;&gt;&lt;router-view /&gt;&lt;/keep-alive&gt;get calcInclude() {return this.$store.state.includes;}const store = {state: {includes: [&#39;...&#39;},},}const mutations = {changeIncludes(state: State, obj: any) {const name = obj.name;const channel = obj.channel;const ind = state.includes.indexOf(name);if (ind &gt; -1 &amp;&amp; channel === &#39;remove&#39;) {state.includes.splice(ind, 1);} else if (channel === &#39;add&#39;) {state.includes.push(name);state.includes = [."/>

  <script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "vue 相关问题",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "\/2017\/workrelated\/"
  },
  
  "genre": "posts",
  "keywords": "Vue",
  "wordcount":  1086 ,
  "url": "\/2017\/workrelated\/",
  "datePublished": "2017-10-02T00:00:00\x2b00:00",
  "dateModified": "2017-10-02T00:00:00\x2b00:00",
  
  "publisher": {
    "@type": "Organization",
    "name": "Magic",
    "logo": {
      "@type": "ImageObject",
      "url": "\/logo.png",
      "width":  50 ,
      "height":  50 
    }
  },
  "author": {
    "@type": "Person",
    "name": "Magic"
  },
  "description": ""
}
</script>
</head>

  



  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="/">Magic</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about" title="">About</a>
                
                <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-sun"></i></a>&nbsp;
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-sun"></i></a>&nbsp;<a href="/">Magic</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about" title="">About</a>
                
        </div>
    </div>
</nav>

    	 <main class="main">
          <div class="container">
      		
<article class="post-warp">
    <header class="post-header">
        <h1 class="post-title">vue 相关问题</h1>
        <div class="post-meta">
            Written by <a href="/"
                rel="author">Magic</a>
            with ♥
            <span class="post-time">
                on <time
                    datetime=2017-10-02>2 October 2017</time>
            </span>
            in
            <i class="iconfont icon-folder"></i>
            <span class="post-category">
                <a href="/categories/vue/"> Vue </a>
                
            </span>
            <i class="iconfont icon-timer"></i>
            6 min
        </div>
    </header>
    <div class="post-content">
        

        

        
        

        
        
        

        
        
        

        <h3 id="使用-keep-alive-来包裹路由后某个页面需要动态的去除缓存">使用 keep-alive 来包裹路由后，某个页面需要动态的去除缓存</h3>
<p>可以使用动态的<code>:include=&quot;calcInclude&quot;</code> 来对需要的缓存的页面进行修改，<code>calcInclude</code>需要使用计算属性。整个<code>include</code>使用数组来储存<em>string[]</em>，数据可放到全局 <code>store</code> 中，通过 <code>commit</code>去修改，在需要的地方去更改。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">keep-alive</span> <span style="color:#a6e22e">:include</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;calcInclude&#34;</span>&gt;
  &lt;<span style="color:#f92672">router-view</span> /&gt;
&lt;/<span style="color:#f92672">keep-alive</span>&gt;
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts"><span style="color:#a6e22e">get</span> <span style="color:#a6e22e">calcInclude() {</span>
  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">$store</span>.<span style="color:#a6e22e">state</span>.<span style="color:#a6e22e">includes</span>;
}
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">store</span> <span style="color:#f92672">=</span> {
  <span style="color:#a6e22e">state</span><span style="color:#f92672">:</span> {
    <span style="color:#a6e22e">includes</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;...&#39;</span>},
  },
}
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">mutations</span> <span style="color:#f92672">=</span> {
  <span style="color:#a6e22e">changeIncludes</span>(<span style="color:#a6e22e">state</span>: <span style="color:#66d9ef">State</span>, <span style="color:#a6e22e">obj</span>: <span style="color:#66d9ef">any</span>) {
      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">obj</span>.<span style="color:#a6e22e">name</span>;
      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">channel</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">obj</span>.<span style="color:#a6e22e">channel</span>;
      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">ind</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">state</span>.<span style="color:#a6e22e">includes</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#a6e22e">name</span>);
      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">ind</span> <span style="color:#f92672">&gt;</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">channel</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;remove&#39;</span>) {
        <span style="color:#a6e22e">state</span>.<span style="color:#a6e22e">includes</span>.<span style="color:#a6e22e">splice</span>(<span style="color:#a6e22e">ind</span>, <span style="color:#ae81ff">1</span>);
      } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">channel</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;add&#39;</span>) {
        <span style="color:#a6e22e">state</span>.<span style="color:#a6e22e">includes</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">name</span>);
        <span style="color:#a6e22e">state</span>.<span style="color:#a6e22e">includes</span> <span style="color:#f92672">=</span> [...<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Set</span>(<span style="color:#a6e22e">state</span>.<span style="color:#a6e22e">includes</span>)];
      }
    },
}
</code></pre></div><ul>
<li>更多关于这个 <a href="https://github.com/vuejs/vue/issues/6509">issues</a></li>
</ul>
<h3 id="使用vuex状态管理后在-input-中使用-v-model-来进行双向数据绑定在修改-input-中值的时候会抛出一个错误">使用vuex状态管理后，在 input 中使用 v-model 来进行双向数据绑定，在修改 input 中值的时候会抛出一个错误</h3>
<blockquote>
<p>可以不使用 v-model 来进行双向数据绑定，使用 :value=&rsquo; ' 来，然后设置一个 监听器来推动 state 的更新( @input=&rsquo; ' )</p>
<p>vue 模板</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vue" data-lang="vue">&lt;<span style="color:#f92672">template</span>&gt;
  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;hello&#34;</span>&gt;
    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#f92672">:value</span><span style="color:#e6db74">=&#34;text&#34;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">input</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;update&#39;</span>&gt;
    &lt;<span style="color:#f92672">span</span>&gt;{{<span style="color:#a6e22e">ddd</span>}}&lt;/<span style="color:#f92672">span</span>&gt;
    &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">ref</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ppp&#34;</span>&gt;<span style="color:#a6e22e">啦啦啦</span>&lt;/<span style="color:#f92672">p</span>&gt;
    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#f92672">v-focus</span>&gt;
  &lt;/<span style="color:#f92672">div</span>&gt;
&lt;/<span style="color:#f92672">template</span>&gt;

&lt;<span style="color:#f92672">script</span>&gt;
<span style="color:#66d9ef">import</span> {<span style="color:#a6e22e">mapState</span>} <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;vuex&#39;</span>
<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> {
  <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;HelloWorld&#39;</span>,
  <span style="color:#a6e22e">data</span> () {
    <span style="color:#66d9ef">return</span> {
      <span style="color:#a6e22e">ddd</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;&#39;</span>
    }
  },
  <span style="color:#a6e22e">computed</span><span style="color:#f92672">:</span> {
    ...<span style="color:#a6e22e">mapState</span>([<span style="color:#e6db74">&#39;text&#39;</span>])
  },
  <span style="color:#a6e22e">methods</span><span style="color:#f92672">:</span> {
    <span style="color:#a6e22e">update</span> (<span style="color:#a6e22e">e</span>) {
　　　<span style="color:#75715e">// 在这里来 更新 state 里的某一个值
</span><span style="color:#75715e"></span>      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">$store</span>.<span style="color:#a6e22e">dispatch</span>(<span style="color:#e6db74">&#39;updataText&#39;</span>, <span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">value</span>)<span style="color:#75715e">// 触发 actions 来 推动 mutations
</span><span style="color:#75715e"></span>      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">$refs</span>.<span style="color:#a6e22e">ppp</span>.<span style="color:#a6e22e">innerText</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;465&#39;</span>
    }
  },
  <span style="color:#a6e22e">watch</span><span style="color:#f92672">:</span> {
    <span style="color:#a6e22e">text</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> () {
      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">ddd</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">$store</span>.<span style="color:#a6e22e">state</span>.<span style="color:#a6e22e">text</span>
    }
  },
  <span style="color:#a6e22e">directives</span><span style="color:#f92672">:</span> {
    <span style="color:#a6e22e">focus</span><span style="color:#f92672">:</span> {
      <span style="color:#75715e">// 自定义指令
</span><span style="color:#75715e"></span>      <span style="color:#a6e22e">inserted</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">el</span>) {
        <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">focus</span>()
      }
    }
  }
}
&lt;/<span style="color:#f92672">script</span>&gt;
</code></pre></div><blockquote>
<p>actions.js 里内容</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">actions</span> <span style="color:#f92672">=</span> {
　<span style="color:#a6e22e">updataText</span> (<span style="color:#a6e22e">context</span>, <span style="color:#a6e22e">val</span>) {
　　　<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">commit</span>(<span style="color:#e6db74">&#39;modify&#39;</span>, <span style="color:#a6e22e">val</span>)
　}
}
<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> <span style="color:#a6e22e">actions</span>
</code></pre></div><blockquote>
<p>state.js 里内容</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> {
　<span style="color:#a6e22e">text</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;46546&#39;</span>
}
</code></pre></div><ul>
<li><em>具体参考 <a href="https://vuex.vuejs.org/zh-cn/forms.html">官方文档</a></em></li>
</ul>
<h3 id="在vue中父组件通过-props-给子组件传递数据然后在-input-通过-v-model-绑定怎么在-watch-中-进行监听通过-props-来把传递的-数据-变成-子组件的-初始值">在vue中父组件通过 props 给子组件传递数据，然后在 input 通过 v-model 绑定，怎么在 watch 中 进行监听，通过 props 来把传递的 数据 变成 子组件的 初始值</h3>
<blockquote>
<p>父组件中的内容</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!-- 取货方式和收货人信息 --&gt;</span>
&lt;<span style="color:#f92672">pick-box</span> <span style="color:#a6e22e">:checked</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;checkedSuccess&#34;</span> <span style="color:#a6e22e">:userData</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;userData&#34;</span> <span style="color:#a6e22e">:user2Data</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;user2Data&#34;</span> <span style="color:#a6e22e">:areaArr</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;infoAreaData&#34;</span> <span style="color:#a6e22e">:errTxt</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;pasTxt&#34;</span> <span style="color:#a6e22e">:isErrShow</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;isErrShow&#34;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">changeErr</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;changeErrShow&#34;</span> <span style="color:#a6e22e">:disabled</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;!checkedSuccess&#34;</span>&gt;&lt;/<span style="color:#f92672">pick-box</span>&gt;
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> {
  <span style="color:#75715e">// 可以在这个地方初始化值
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">areaN</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">$store</span>.<span style="color:#a6e22e">state</span>.<span style="color:#a6e22e">numStatus</span>.<span style="color:#a6e22e">cityDic</span>.<span style="color:#a6e22e">cityName</span>
  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">areaN</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;大兴安岭&#39;</span>) {
    <span style="color:#a6e22e">emCityName1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">areaN</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;地区&#39;</span>
  } <span style="color:#66d9ef">else</span> {
    <span style="color:#a6e22e">emCityName1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">areaN</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;市&#39;</span>
  }

  <span style="color:#a6e22e">data</span> () {
    <span style="color:#66d9ef">return</span> {
      <span style="color:#a6e22e">userData</span><span style="color:#f92672">:</span> {
        <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;&#39;</span>,
        <span style="color:#a6e22e">idCard</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;&#39;</span>
      },
      <span style="color:#a6e22e">emCityName</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">emCityName</span>
    }
  }
}
</code></pre></div><blockquote>
<p>子组件中的内容</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vue" data-lang="vue">&lt;<span style="color:#f92672">template</span>&gt;
  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;pickBox&#34;</span>&gt;
    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;conInfoBox&#34;</span> <span style="color:#f92672">v-show</span><span style="color:#e6db74">=&#34;order.chiocePick === &#39;1&#39;&#34;&gt;
</span><span style="color:#e6db74">      &lt;h3 class=&#34;numH3 c288fe line1&#34;&gt;收货人信息&lt;/h3&gt;
</span><span style="color:#e6db74">      &lt;!-- 联系人姓名 --&gt;
</span><span style="color:#e6db74">      &lt;div class=&#34;conInpBox&#34; @click=&#34;inputFocus&#34;&gt;&lt;span class=&#34;coin&#34;&gt;*&lt;/span&gt;&lt;input class=&#34;netInput&#34; type=&#34;text&#34; v-model=&#34;conPerName&#34; placeholder=&#34;联系人姓名: 请输入联系人姓名&#34; :disabled=&#34;!checked&#34;&gt;&lt;/div&gt;
</span><span style="color:#e6db74">      &lt;div class=&#34;errPro&#34;&gt;
</span><span style="color:#e6db74">        &lt;div class=&#34;errItem&#34; v-show=&#34;isconErrShow.conErrName&#34;&gt;&lt;span class=&#34;errCoin f24&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;proTxt&#34;&gt;请输入正确的收货人姓名&lt;/span&gt;&lt;/div&gt;
</span><span style="color:#e6db74">      &lt;/div&gt;
</span><span style="color:#e6db74">      &lt;!-- 联系人电话 --&gt;
</span><span style="color:#e6db74">      &lt;div class=&#34;conInpBox&#34; @click=&#34;inputFocus&#34;&gt;&lt;span class=&#34;coin&#34;&gt;*&lt;/span&gt;&lt;input class=&#34;netInput&#34; type=&#34;tel&#34; v-model=&#34;conPerTel&#34; placeholder=&#34;联系人电话: 请输入联系人电话&#34; :disabled=&#34;!checked&#34;&gt;&lt;/div&gt;
</span><span style="color:#e6db74">      &lt;div class=&#34;errPro&#34;&gt;
</span><span style="color:#e6db74">        &lt;div class=&#34;errItem&#34; v-show=&#34;isconErrShow.conErrTel&#34;&gt;&lt;span class=&#34;errCoin f24&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;proTxt&#34;&gt;请输入正确的收货人电话&lt;/span&gt;&lt;/div&gt;
</span><span style="color:#e6db74">      &lt;/div&gt;
</span><span style="color:#e6db74">      &lt;!-- 所选区县 --&gt;
</span><span style="color:#e6db74">      &lt;div class=&#34;conInpBox conArea&#34; :class=&#34;{&#39;inputDisabled&#39;: !checked}&#34; @click=&#34;inputFocus&#34;&gt;
</span><span style="color:#e6db74">        &lt;div class=&#34;conAreaBox&#34;&gt;&lt;span class=&#34;coin&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;areaTxt&#34; :class=&#34;{&#39;inputDisabled&#39;: !checked}&#34;&gt;{{conPerArea}}&lt;/span&gt;&lt;/div&gt;
</span><span style="color:#e6db74">        &lt;div class=&#34;c288fe&#34; @click=&#34;openPickPop&#34; :class=&#34;{&#39;inputDisabled&#39;: !checked}&#34;&gt;选择区县 〉&lt;/div&gt;
</span><span style="color:#e6db74">      &lt;/div&gt;
</span><span style="color:#e6db74">      &lt;!-- 收货人信息详细地址 --&gt;
</span><span style="color:#e6db74">      &lt;div class=&#34;conInpBox&#34; @click=&#34;inputFocus&#34;&gt;&lt;span class=&#34;coin&#34;&gt;*&lt;/span&gt;&lt;input class=&#34;netInput&#34; type=&#34;tel&#34; v-model=&#34;conPerAdd&#34; placeholder=&#34;详细地址: 请输入详细地址&#34; :disabled=&#34;!checked&#34;&gt;&lt;/div&gt;
</span><span style="color:#e6db74">      &lt;div class=&#34;errPro&#34;&gt;
</span><span style="color:#e6db74">        &lt;div class=&#34;errItem&#34; v-show=&#34;isconErrShow.conErrAdd&#34;&gt;&lt;span class=&#34;errCoin f24&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;proTxt&#34;</span>&gt;<span style="color:#a6e22e">请输入正确的收货人地址</span>&lt;/<span style="color:#f92672">span</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
      &lt;/<span style="color:#f92672">div</span>&gt;
    &lt;/<span style="color:#f92672">div</span>&gt;
  &lt;/<span style="color:#f92672">div</span>&gt;
&lt;/<span style="color:#f92672">template</span>&gt;

&lt;<span style="color:#f92672">script</span>&gt;
<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> {
  <span style="color:#a6e22e">data</span> () {
    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">areaDefalut</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">$store</span>.<span style="color:#a6e22e">state</span>.<span style="color:#a6e22e">numStatus</span>.<span style="color:#a6e22e">cityDic</span>.<span style="color:#a6e22e">cityName</span>
    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">emCityName2</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">areaDefalut</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;大兴安岭&#39;</span>) {
      <span style="color:#a6e22e">emCityName2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">areaDefalut</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;地区&#39;</span>
    } <span style="color:#66d9ef">else</span> {
      <span style="color:#a6e22e">emCityName2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">areaDefalut</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;市&#39;</span>
    }

    <span style="color:#66d9ef">return</span><span style="color:#f92672">:</span> {
      <span style="color:#a6e22e">isDisable</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>,
      <span style="color:#a6e22e">loginNo</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">loginNo</span>,
      <span style="color:#a6e22e">isLoading</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>,
      <span style="color:#a6e22e">pickPersonArea</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;&#39;</span>,
      <span style="color:#a6e22e">conPerName</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;&#39;</span>,
      <span style="color:#a6e22e">conPerTel</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;&#39;</span>,
      <span style="color:#a6e22e">conPerAdd</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;&#39;</span>,
      <span style="color:#a6e22e">conPerArea</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`所属地区: 黑龙江省 </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">emCityName2</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>,
      <span style="color:#a6e22e">conPerAreaCode</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;&#39;</span>
    }
  },
  <span style="color:#a6e22e">props</span><span style="color:#f92672">:</span> {
    <span style="color:#a6e22e">userData</span><span style="color:#f92672">:</span> {
      <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> Object
    },
    <span style="color:#a6e22e">user2Data</span><span style="color:#f92672">:</span> {
      <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> Object
    },
    <span style="color:#a6e22e">areaArr</span><span style="color:#f92672">:</span> {
      <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> Array
    },
    <span style="color:#a6e22e">isErrShow</span><span style="color:#f92672">:</span> {
      <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> Object
    },
    <span style="color:#a6e22e">errTxt</span><span style="color:#f92672">:</span> {
      <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> String
    },
    <span style="color:#a6e22e">checked</span><span style="color:#f92672">:</span> {
      <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> Boolean
    }
  },
  <span style="color:#a6e22e">watch</span><span style="color:#f92672">:</span> {
    <span style="color:#a6e22e">user2Data</span><span style="color:#f92672">:</span> {
      <span style="color:#a6e22e">handler</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">newVal</span>, <span style="color:#a6e22e">oldVal</span>) {
        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">newVal</span>, <span style="color:#a6e22e">oldVal</span>)
      },
      <span style="color:#a6e22e">deep</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>  <span style="color:#75715e">// 深度监听模式
</span><span style="color:#75715e"></span>    },
    <span style="color:#75715e">// 收货人姓名检验
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">conPerName</span> (<span style="color:#a6e22e">newVal</span>, <span style="color:#a6e22e">oldVal</span>) {
      <span style="color:#75715e">/* eslint-disable */</span>
      <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">conNameReg</span> <span style="color:#f92672">=</span>  <span style="color:#e6db74">/^([a-zA-Z\u4e00-\u9fa5\·]{1,10})$/</span>
      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">newVal</span> <span style="color:#f92672">!==</span> <span style="color:#e6db74">&#39;&#39;</span>) {
        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">conNameReg</span>.<span style="color:#a6e22e">test</span>(<span style="color:#a6e22e">newVal</span>)) {
          <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">isconErrShow</span>.<span style="color:#a6e22e">conErrName</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
        } <span style="color:#66d9ef">else</span> {
          <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">isconErrShow</span>.<span style="color:#a6e22e">conErrName</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>
        }
      } <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">isconErrShow</span>.<span style="color:#a6e22e">conErrName</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>
      }
    },
    <span style="color:#75715e">// 收货人详细地址地址检验
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">conPerAdd</span> (<span style="color:#a6e22e">newVal</span>, <span style="color:#a6e22e">oldVal</span>) {
       <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">detaAdd</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">/[@\/\&#39;\\\&#34;$%&amp;_!！+=\^\*\$\+\(\)\-\（\）]+/ig</span>
       <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">newVal</span> <span style="color:#f92672">!==</span> <span style="color:#e6db74">&#39;&#39;</span>) {
         <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">detaAdd</span>.<span style="color:#a6e22e">test</span>(<span style="color:#a6e22e">newVal</span>) <span style="color:#f92672">||</span> <span style="color:#a6e22e">newVal</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;&#39;</span>) {
           <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">isconErrShow</span>.<span style="color:#a6e22e">conErrAdd</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>
         } <span style="color:#66d9ef">else</span> {
           <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">isconErrShow</span>.<span style="color:#a6e22e">conErrAdd</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
         }
       } <span style="color:#66d9ef">else</span> {
         <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">isconErrShow</span>.<span style="color:#a6e22e">conErrAdd</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>
       }
    },
    <span style="color:#75715e">// 收货人电话检验
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">conPerTel</span> (<span style="color:#a6e22e">newVal</span>, <span style="color:#a6e22e">oldVal</span>) {
      <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">conPTReg</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">/^\d{6,}$/</span>
      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">newVal</span> <span style="color:#f92672">!==</span> <span style="color:#e6db74">&#39;&#39;</span>) {
        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">conPTReg</span>.<span style="color:#a6e22e">test</span>(<span style="color:#a6e22e">newVal</span>)) {
          <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">isconErrShow</span>.<span style="color:#a6e22e">conErrTel</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
        } <span style="color:#66d9ef">else</span> {
          <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">isconErrShow</span>.<span style="color:#a6e22e">conErrTel</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>
        }
      } <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">isconErrShow</span>.<span style="color:#a6e22e">conErrTel</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>
      }
    }
  }
}
&lt;/<span style="color:#f92672">script</span>&gt;
</code></pre></div><ul>
<li><strong>可以通过 在 data 里 初始化一个 简单值 ，然后 通过 watch 来 监听 通过 props 来传入值的变化 ，然后 再进行 赋值，然后 就可以 通过 在 watch 里面 来 监听 要 变化的 值 来 进行 处理。也可以 通过  computed 来 使 props 传递过来的数据 变成 子组件的 初始值，然后在 input 上面 通过 v-model 来进行双向数据绑定，可以 监听 input 的 change 事件 ， 来进行 对 输入过程中 进行操作。</strong></li>
</ul>
<h3 id="在vue-中-使用-mint-ui-的-picker-选择器-组件在下滑或上滑和手机浏览器原生滑动事件有冲突通常在-ios-上-会有这个现象可以监听-touchmove-事件来阻止默认事件具体看代码">在vue 中 使用 mint-ui 的 Picker 选择器 组件，在下滑或上滑和手机浏览器原生滑动事件有冲突（通常在 IOS 上 会有这个现象），可以监听 touchmove 事件，来阻止默认事件，具体看代码</h3>
<ul>
<li><strong>参考 <a href="http://iscrolljs.com/">http://iscrolljs.com/</a>  <a href="http://iscrolljs.com/">这个网站</a></strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">isPassive</span> () {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">supportsPassiveOption</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
  <span style="color:#66d9ef">try</span> {
    <span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;test&#39;</span>, <span style="color:#66d9ef">null</span>, Object.<span style="color:#a6e22e">defineProperty</span>({}, <span style="color:#e6db74">&#39;passive&#39;</span>, {
      <span style="color:#a6e22e">get</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> () {
        <span style="color:#a6e22e">supportsPassiveOption</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>
      }
    }))
  } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {}
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">supportsPassiveOption</span>
}

<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">preventDefaultFunc</span> (<span style="color:#a6e22e">e</span>) {
  <span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">preventDefault</span>()
}

<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">preventTouchmove</span> (<span style="color:#a6e22e">onoff</span>) {
  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">onoff</span>) {
    document.<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;touchmove&#39;</span>, <span style="color:#a6e22e">preventDefaultFunc</span>, <span style="color:#a6e22e">isPassive</span>() <span style="color:#f92672">?</span> {
      <span style="color:#a6e22e">capture</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>,
      <span style="color:#a6e22e">passive</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>
    } <span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>)
  } <span style="color:#66d9ef">else</span> {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;wawawwaawa&#39;</span>)
    document.<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">removeEventListener</span>(<span style="color:#e6db74">&#39;touchmove&#39;</span>, <span style="color:#a6e22e">preventDefaultFunc</span>, <span style="color:#a6e22e">isPassive</span>() <span style="color:#f92672">?</span> {
      <span style="color:#a6e22e">capture</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>,
      <span style="color:#a6e22e">passive</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>
    } <span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>)
  }
}
</code></pre></div><ul>
<li>然后通过</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">preventTouchmove</span> } <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;utils/common&#39;</span>
</code></pre></div><ul>
<li>来导入这个方法，然后使用，onoff 是开关，来传 布尔值</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">preventTouchmove</span>(<span style="color:#66d9ef">true</span><span style="color:#f92672">/</span><span style="color:#66d9ef">false</span>)
</code></pre></div><h3 id="在vue项目中展示效果为展开收起的动画组件">在vue项目中展示效果为展开收起的动画组件</h3>
<ol>
<li>expand.js （自己创建的js文件名）</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">elTransition</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;0.3s height ease-in-out, 0.3s padding-top ease-in-out, 0.3s padding-bottom ease-in-out&#39;</span>
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">Transition</span> <span style="color:#f92672">=</span> {
  <span style="color:#e6db74">&#39;before-enter&#39;</span> (<span style="color:#a6e22e">el</span>) {
    <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">transition</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">elTransition</span>
    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">dataset</span>) <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">dataset</span> <span style="color:#f92672">=</span> {}

    <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">dataset</span>.<span style="color:#a6e22e">oldPaddingTop</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">paddingTop</span>
    <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">dataset</span>.<span style="color:#a6e22e">oldPaddingBottom</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">paddingBottom</span>

    <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">height</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
    <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">paddingTop</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
    <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">paddingBottom</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
  },

  <span style="color:#e6db74">&#39;enter&#39;</span> (<span style="color:#a6e22e">el</span>) {
    <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">dataset</span>.<span style="color:#a6e22e">oldOverflow</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">overflow</span>
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">scrollHeight</span> <span style="color:#f92672">!==</span> <span style="color:#ae81ff">0</span>) {
      <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">height</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">scrollHeight</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;px&#39;</span>
      <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">paddingTop</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">dataset</span>.<span style="color:#a6e22e">oldPaddingTop</span>
      <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">paddingBottom</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">dataset</span>.<span style="color:#a6e22e">oldPaddingBottom</span>
    } <span style="color:#66d9ef">else</span> {
      <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">height</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
      <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">paddingTop</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">dataset</span>.<span style="color:#a6e22e">oldPaddingTop</span>
      <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">paddingBottom</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">dataset</span>.<span style="color:#a6e22e">oldPaddingBottom</span>
    }

    <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">overflow</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;hidden&#39;</span>
  },

  <span style="color:#e6db74">&#39;after-enter&#39;</span> (<span style="color:#a6e22e">el</span>) {
    <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">transition</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
    <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">height</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
    <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">overflow</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">dataset</span>.<span style="color:#a6e22e">oldOverflow</span>
  },

  <span style="color:#e6db74">&#39;before-leave&#39;</span> (<span style="color:#a6e22e">el</span>) {
    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">dataset</span>) <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">dataset</span> <span style="color:#f92672">=</span> {}
    <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">dataset</span>.<span style="color:#a6e22e">oldPaddingTop</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">paddingTop</span>
    <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">dataset</span>.<span style="color:#a6e22e">oldPaddingBottom</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">paddingBottom</span>
    <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">dataset</span>.<span style="color:#a6e22e">oldOverflow</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">overflow</span>

    <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">height</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">scrollHeight</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;px&#39;</span>
    <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">overflow</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;hidden&#39;</span>
  },

  <span style="color:#e6db74">&#39;leave&#39;</span> (<span style="color:#a6e22e">el</span>) {
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">scrollHeight</span> <span style="color:#f92672">!==</span> <span style="color:#ae81ff">0</span>) {
      <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">transition</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">elTransition</span>
      <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">height</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
      <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">paddingTop</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
      <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">paddingBottom</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
    }
  },

  <span style="color:#e6db74">&#39;after-leave&#39;</span> (<span style="color:#a6e22e">el</span>) {
    <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">transition</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
    <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">height</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
    <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">overflow</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">dataset</span>.<span style="color:#a6e22e">oldOverflow</span>
    <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">paddingTop</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">dataset</span>.<span style="color:#a6e22e">oldPaddingTop</span>
    <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">paddingBottom</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">dataset</span>.<span style="color:#a6e22e">oldPaddingBottom</span>
  }
}

<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> {
  <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;collapseTransition&#39;</span>,
  <span style="color:#a6e22e">functional</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
  <span style="color:#a6e22e">render</span> (<span style="color:#a6e22e">h</span>, { <span style="color:#a6e22e">children</span> }) {
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">data</span> <span style="color:#f92672">=</span> {
      <span style="color:#a6e22e">on</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Transition</span>
    }
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">h</span>(<span style="color:#e6db74">&#39;transition&#39;</span>, <span style="color:#a6e22e">data</span>, <span style="color:#a6e22e">children</span>)
  }
}
</code></pre></div><ol start="2">
<li>在组件中使用</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vue" data-lang="vue">&lt;<span style="color:#f92672">template</span>&gt;
  &lt;<span style="color:#f92672">div</span>&gt;
    &lt;<span style="color:#f92672">collapse-transition</span>&gt;
      <span style="color:#75715e">&lt;!--</span> <span style="color:#a6e22e">展示的内容</span> <span style="color:#f92672">--&gt;</span>
    <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/collapse-transition&gt;</span>
  &lt;/<span style="color:#f92672">div</span>&gt;
&lt;/<span style="color:#f92672">template</span>&gt;

&lt;<span style="color:#f92672">script</span>&gt;
<span style="color:#66d9ef">import</span> <span style="color:#a6e22e">CollapseTransition</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;../expand.js&#39;</span>
<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> {
  <span style="color:#a6e22e">data</span> () {
    <span style="color:#66d9ef">return</span> {
      <span style="color:#a6e22e">isActive</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>
    }
  },
  <span style="color:#a6e22e">components</span><span style="color:#f92672">:</span> {
    <span style="color:#a6e22e">CollapseTransition</span>
  },
  <span style="color:#a6e22e">methods</span><span style="color:#f92672">:</span> {
    <span style="color:#a6e22e">moreAndMore</span> () {
      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">isActive</span> <span style="color:#f92672">=</span> <span style="color:#f92672">!</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">isActive</span>
    },
    <span style="color:#a6e22e">collClick</span> () {
      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">isActive</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
    }
  }
}
&lt;/<span style="color:#f92672">script</span>&gt;
</code></pre></div><ol start="3">
<li><strong>有卡顿或者获取高度有误，在enter的时候用setTimeout做了0.1s的延迟，就能准确的获取height了</strong></li>
</ol>
<h3 id="页面刷新vuex被清空">页面刷新vuex被清空</h3>
<ul>
<li>
<p>同一个页面(router未改变)，一旦刷新（刷新或深度刷新），存储的<code>vuex</code>就马上和你说拜拜，解决方法：</p>
<p>localStorage：网上推荐最多的方法就是用<code>localStorage</code>。</p>
<p>数据重新获取：在需要某些数据之前先判断一下数据是否存在，如果不存在重新获取。</p>
<p><a href="https://github.com/robinvdvleuten/vuex-persistedstate">vuex-persistedstate</a>：状态持久化。</p>
</li>
</ul>
<h3 id="nexttick适当使用">nextTick适当使用</h3>
<p>将回调延迟到下次 DOM 更新循环之后执行。在修改数据之后立即使用它，然后等待 DOM 更新。它跟全局方法 <code>Vue.nextTick</code> 一样，不同的是回调的 this 自动绑定到调用它的实例上。简而言之，等待DOM更新之后再进行操作。</p>
<h3 id="elmentui里面的el-form-就地复用">elmentui里面的el-form &lsquo;就地复用&rsquo;</h3>
<p>和<code>v-for</code>一样，更新已渲染过的元素时，它默认用‘就地复用’策略。如果数据项的顺序被改变，<code>Vue将不会移动DOM</code>元素来匹配数据项的顺序，而是简单服用此处每个元素，并且确保它在特定索引下显示已被渲染过的每个元素。</p>
<h3 id="prop值的改变--不是立即">prop值的改变&ndash;不是立即</h3>
<ul>
<li>
<p>如果父组件中给子组件传递了一个<code>prop</code>的值，然后调用子组件的方法去获取该值，会发现值没有立即改变。</p>
<p>解决方法：可以监听值的改变去调用相应子组件的方法，将子组件相关方法的调用放在<code>nextTick</code>里面</p>
</li>
<li>
<p>不要直接修改<code>prop</code>传下来的值，可以在当前子组件内部声明一个简单值，然后赋值</p>
</li>
</ul>
<h3 id="组件之间的调用方式">组件之间的调用方式</h3>
<ul>
<li>父子组件<br>
prop向下传递，事件向上传递<br>
子组件添加ref属性，父组件可以获取到子组件的实例（不建议）<br>
插槽slot 作用域插槽</li>
<li>非父子组件<br>
使用状态管理<br>
实例化一个公共vue实例</li>
</ul>
<h3 id="路由变化页面数据不刷新问题">路由变化页面数据不刷新问题</h3>
<ul>
<li>出现这种情况是因为依赖路由的<code>params</code>参数获取写在<code>created</code>生命周期里面,因为相同路由二次甚至多次加载的关系 没有达到监听，退出页面再进入另一个文章页面并不会运行<code>created</code>组件生命周期,导致文章数据还是第一次进入的数据，解决方法：watch监听路由是否变化</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"> <span style="color:#a6e22e">watch</span><span style="color:#f92672">:</span> {
   <span style="color:#75715e">// 方法1
</span><span style="color:#75715e"></span>   <span style="color:#e6db74">&#39;$route&#39;</span>(<span style="color:#a6e22e">to</span>, <span style="color:#a6e22e">from</span>) { <span style="color:#75715e">//监听路由是否变化
</span><span style="color:#75715e"></span>     <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">$route</span>.<span style="color:#a6e22e">params</span>.<span style="color:#a6e22e">articleId</span>) { <span style="color:#75715e">// 判断条件1  判断传递值的变化
</span><span style="color:#75715e"></span>       <span style="color:#75715e">//获取文章数据
</span><span style="color:#75715e"></span>     }
   }
   <span style="color:#75715e">//方法2
</span><span style="color:#75715e"></span>   <span style="color:#e6db74">&#39;$route&#39;</span>(<span style="color:#a6e22e">to</span>, <span style="color:#a6e22e">from</span>) {
     <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">to</span>.<span style="color:#a6e22e">path</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;/page&#34;</span>) { <span style="color:#75715e">/// 判断条件2  监听路由名 监听你从什么路由跳转过来的
</span><span style="color:#75715e"></span>       <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">message</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">$route</span>.<span style="color:#a6e22e">query</span>.<span style="color:#a6e22e">msg</span>
     }
   }

 }
</code></pre></div>
    </div>

    <div class="post-copyright">
        
        <p class="copyright-item">
            <span>Author:</span>
            <span>Magic </span>
        </p>
        

        <p class="copyright-item">
            <span>Words:</span>
            <span>1086</span>
        </p>

        <p class="copyright-item">
            
            <span>Share:</span>
            <span>

      
        <a href="//twitter.com/share?url=%2f2017%2fworkrelated%2f&amp;text=vue%20%e7%9b%b8%e5%85%b3%e9%97%ae%e9%a2%98&amp;via=" target="_blank" title="Share on Twitter">
          <i class="iconfont icon-twitter"></i>
        </a>
        
      
      
        <a href="//www.facebook.com/sharer/sharer.php?u=%2f2017%2fworkrelated%2f" target="_blank" title="Share on Facebook">
          <i class="iconfont icon-facebook"></i>
        </a>
        
      
      
      
      
      
      
        
      
        
      

          

          

          

          
        <a href="//service.weibo.com/share/share.php?url=%2f2017%2fworkrelated%2f&amp;appkey=&amp;title=vue%20%e7%9b%b8%e5%85%b3%e9%97%ae%e9%a2%98" target="_blank" title="Share on Douban ">
            <i class="iconfont icon-weibo"></i>
          </a>
          
</span>
        </p>
        

        
        <p class="copyright-item">
            Released under <a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a>
        </p>
        
    </div>


    <div class="post-tags">
        
        <section>
            <i class="iconfont icon-icon-tag"></i>Tag:
            
            <span class="tag"><a href="/tags/vue/">
                    #Vue</a></span>
            
        </section>
        
        <section>
            <a href="javascript:window.history.back();">Back</a></span> ·
            <span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="/2017/vue-watch/" class="prev" rel="prev" title="Vue watch选项"><i
                class="iconfont icon-dajiantou"></i>&nbsp;Vue watch选项</a>
        
        
        <a href="/2017/vueplugins/" class="next" rel="next"
            title="Vue Plugins And Expansion">Vue Plugins And Expansion&nbsp;<i class="iconfont icon-xiaojiantou"></i></a>
        
    </div>

    <div class="post-comment">
        
        <div id="disqus_thread"></div>
    <script type="text/javascript">
    (function() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'yourdiscussshortname';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  


        
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2017 - 2020</span>
        
         
            <span class="author" itemprop="copyrightHolder"><a href="/">Magic</a> | </span>
         

		  <span>Crafted with ❤️ by <a href="https://github.com/Fastbyte01/KeepIt" target="_blank" rel="external nofollow noopener noreffer">KeepIt</a> & <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreffer">Hugo</a></span>
    </div>
</footer>












    
    
    <script src="/js/vendor_no_gallery.min.js" async=""></script>
    
  







     </div>
  </body>
</html>
